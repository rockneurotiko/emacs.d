#+begin_src plantuml :file biblioteca.png
  skinparam monochrome true
  title Diagrama de clases "prestamo bibliotecario"

  Usuario .. Prestamo
  Usuario -- PersonalBiblioteca
  PersonalBiblioteca -- Prestamo
  PersonalBiblioteca -- Estanteria
  Prestamo -left- IteradorLibros
  Prestamo -- Libro
  IteradorLibros -- Libro
  Libro -right- Estanteria

  Libro11 .right.> Libro : instancia
  Libro12 .up.> Libro : instancia
  Libro21 .up.> Libro : instancia
  Libro22 .up.> Libro : instancia
  Libro31 .up.> Libro : instancia
  Libro32 .up.> Libro : instancia

  Usuario : id
  Usuario : nombre
  Usuario : dni
  Usuario : [Prestamo]
  Usuario : +coger(Libro)
  Usuario : +entregar(Prestamo)

  PersonalBiblioteca : id
  PersonalBiblioteca : nombre
  PersonalBiblioteca : +peticionPrestamo(string)
  PersonalBiblioteca : +peticionDevolucion(Prestamo)
  PersonalBiblioteca : +confirmacion_prestamo(Prestamo)

  Prestamo : id
  Prestamo : fechaEntrega
  Prestamo : fechaMaxima
  Prestamo : fechaDevolucion
  Prestamo : libro
  Prestamo : +iniciar(string)
  Prestamo : +finalizar()
  Prestamo : +confirmacion_prestamo(Libro)

  class IteradorLibros << (L,cyan) >>
  IteradorLibros : [Libros]
  IteradorLibros : +buscar(str)

  Estanteria : id
  Estanteria : situacionFisica
  Estanteria : [Libros]
  Estanteria : +coger(Libro)
  Estanteria : +devolver(Libro)

  Libro : id
  Libro : ISBN
  Libro : titulo
  Libro : numero_ejemplar
  Libro : prestado
  Libro : estanteria
  Libro : +prestar()
  Libro : +devolver()

  class Libro11 << (I,orchid) >>
  class Libro12 << (I,orchid) >>
  class Libro21 << (I,orchid) >>
  class Libro22 << (I,orchid) >>
  class Libro31 << (I,orchid) >>
  class Libro32 << (I,orchid) >>

  Libro11 : id=1
  Libro11 : ISBN=978-0131204867
  Libro11 : titulo=Category Theory
  Libro11 : numero_ejemplar=1
  Libro11 : prestado=false
  Libro11 : estanteria=1

  Libro12 : id=2
  Libro12 : ISBN=978-0131204867
  Libro12 : titulo=Category Theory
  Libro12 : numero_ejemplar=2
  Libro12 : prestado=false
  Libro12 : estanteria=1

  Libro21 : id=3
  Libro21 : ISBN=978-0205089741
  Libro21 : titulo=Denotational Semantics
  Libro21 : numero_ejemplar=1
  Libro21 : prestado=false
  Libro21 : estanteria=1

  Libro22 : id=4
  Libro22 : ISBN=978-0205089741
  Libro22 : titulo=Denotational Semantics
  Libro22 : numero_ejemplar=2
  Libro22 : prestado=false
  Libro22 : estanteria=1

  Libro31 : id=5
  Libro31 : ISBN=978-0262162098
  Libro31 : titulo=Type Systems
  Libro31 : numero_ejemplar=1
  Libro31 : prestado=false
  Libro31 : estanteria=2

  Libro32 : id=6
  Libro32 : ISBN=978-0262162098 
  Libro32 : titulo=Type Systems
  Libro32 : numero_ejemplar=2
  Libro32 : prestado=false
  Libro32 : estanteria=2


#+end_src

#+RESULTS:
[[file:biblioteca.png]]

#+begin_src plantuml :file secuencia_devolucion.png
  skinparam monochrome true

  title Proceso de devolucion de un Libro

  Usuario -> PersonalBiblioteca: peticionDevolucion(Prestamo)
  activate PersonalBiblioteca

  PersonalBiblioteca -> Prestamo: finalizar()
  Prestamo -> Libro: devolver()
  PersonalBiblioteca -> Usuario: coger(Libro)
  PersonalBiblioteca -> Estanteria: devolver(Libro)
  deactivate PersonalBiblioteca
#+end_src

#+RESULTS:
[[file:secuencia_devolucion.png]]

#+begin_src plantuml :file secuencia_prestamo.png
  skinparam monochrome true

  title Proceso de prestamo de un Libro

  Usuario -> PersonalBiblioteca: peticionPrestamo(string)
  activate PersonalBiblioteca

  PersonalBiblioteca -> Prestamo: iniciar(string)
  activate Prestamo

  Prestamo -> IteradorLibros: buscar(string)
  activate IteradorLibros

  IteradorLibros -> Libro: prestar()
  IteradorLibros --> Prestamo: confirmacion_prestamo(Libro)
  deactivate IteradorLibros

  Prestamo --> PersonalBiblioteca: confirmacion_prestamo(Prestamo)
  deactivate Prestamo

  PersonalBiblioteca -> Estanteria: coger(Libro)
  PersonalBiblioteca -> Usuario: entregar(Prestamo)
  deactivate PersonalBiblioteca

#+end_src

#+RESULTS:
[[file:secuencia_prestamo.png]]
