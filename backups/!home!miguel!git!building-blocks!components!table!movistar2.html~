<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <script src="http://code.angularjs.org/1.3.0/angular.js"></script>
    <script src="http://code.angularjs.org/1.3.0/angular-resource.js"></script>
    <script src="http://bazalt-cms.com/assets/ng-table/0.3.1/ng-table.js"></script>
    <script src="http://code.angularjs.org/1.3.0/angular-mocks.js"></script>

    <!-- If you want buttons, uncomment the next -->
    <!--
    <LINK href="../buttons/css/movistar/button.css" rel="stylesheet" type="text/css"/>
    <LINK href="../buttons/css/default-button.css" rel="stylesheet" type="text/css"/>
    -->

    <link hrep="../inputs_standard/css/telefonica/input.css"/>

    <link href="../inputs_standard/css/default-input.css" rel="stylesheet" type="text/css"/>
    <link href="../inputs_standard/css/movistar/input.css" rel="stylesheet" type="text/css"/>
    <link href="../inputs_standard/css/layout.css" rel="stylesheet" type="text/css"/>


    <link href="css/table.css" rel="stylesheet" type="text/css"/>
    <script src="js/app.js" type="text/javascript"></script>
    <script src="js/mockData.js" type="text/javascript"></script>
    <script src="js/table.js" type="text/javascript"></script>

    <title>Table Component Prewiew</title>
</head>
<body ng-app="main" ng-controller="TableController">
    <header>
    </header>
    <button ng-click="tableParams.reload()" class="btn btn-default">Reload</button>
    <button ng-click="tableParams.sorting({});" class="btn btn-default pull-right">Clear sorting</button>
    <div class="clearfix"></div>
    <div loading-container="tableParams.settings().$loading">
        <table ng-table="tableParams" show-filter="false" class="table ng-table-rowselected" template-pagination="custom/pager">
            <thead>
                <tr>
                    <th ng-repeat="column in columns" ng-show="column.visible"
                    class="text-center sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(column.field, 'asc'),
                    'sort-desc': tableParams.isSortBy(column.field, 'desc')
                }"
                ng-click="tableParams.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')">
                <div id ="{{column.title}}" ng-if="!template" ng-show="!template" class="ng-scope ng-binding" ng-switch on="tableParams.isSortBy(column.field, 'asc')">
                    {{column.title}}
                    <a class="movistar table-arrow table-up_arrow" ng-switch-when="true"></a>
                    <a class="movistar table-arrow table-down_arrow" ng-switch-when="false" ng-if="tableParams.isSortBy(column.field, 'desc')"></a>
                </div>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="dataitem in $data"
        ng-click="select_item(dataitem, $data)"
        ng-dblclick="(!dataitem.$edit) ? dataitem.$edit = true : (dataitem.$edit = false || putData(dataitem))" ng-class="{'active' : dataitem.$selected}">
            <td ng-repeat="column in columns" ng-show="column.visible" sortable="column.field" ng-class="{
                        'tr-normal': !(dataitem.$edit && column.modify),
                        'tr-edit': dataitem.$edit && column.modify
                    }">
                <span class="ellipsis" clear-width ng-if="!dataitem.$edit || !column.modify">{{dataitem[column.field]}}</span>

                <div ng-if="dataitem.$edit && column.modify">
                    <input class="movistar input table-input" type="text" ng-model="dataitem[column.field]" size=1 ng-keyup="$event.keyCode == 13 ? finish_edit(dataitem) : null" onclick="this.select()" />
                </div>
            </td>
        </tr>
    </tbody>
</table>
</div>
<script type="text/ng-template" id="custom/pager">
    <div class="tableFooter"
    ng-class="{
        'off': !itemsSelected(),
        'on': itemsSelected()
    }">
    <div class="tableFooterElement">{{ (data | filter:{"$selected": true}).length }} selected</div>
    <div class="tableFooterElement right" ng-if="!itemsSelected()">
        <img src="images/movistar/arrow_left_black.png" ng-click="(params.page()>1) ? params.page(params.page()-1) : null">
        <p>{{params.page()}} of {{params.npages}}</p>
        <img src="images/movistar/arrow_right_black.png" ng-click="(params.page()<params.total()/params.count()) ? params.page(params.page()+1) : null">
    </div>

    <div class="tableFooterBtn" ng-if="itemsSelected()">
        <ul>
            <li class="foot-list" ng-repeat="option in options"
                ng-click="clear(option); option.shown = !option.shown" ng-class="{'clicked': option.shown}">
                <div>{{option.name}}</div>
                <ul ng-if="option.shown">
                    <li ng-repeat="value in option.value" ng-click="dynamic_click(value)"><div class="tableFooter-subitem">{{value.name}}</div></li>
                </ul>
            </li>

            <!-- // With Buttons
            // <li ng-repeat="option in options"
            //     ng-click="clear(option); (option.type === 'button') ? dynamic_click(option) : option.shown = !option.shown" ng-class="{
            //         'clicked': option.shown,
            //         'foot-list': !(option.type === 'button')
            //     }">
            //     <div ng-if="!(option.type === 'button')">{{option.name}}</div>
            //     <button class="movistar button small {{option.my_class}}" ng-if="(option.type === 'button')" type='submit' enabled="">{{option.name}}</button>
            //     <ul ng-if="option.shown">
            //         <li ng-repeat="value in option.value" ng-click="dynamic_click(value)">{{value.name}}</li>
            //     </ul>
            // </li>
            -->
        </ul>
    </div>

</div>
</script>
</body>
</html>
